/*!
 * velox - v0.3.2 - https://github.com/jpillora/velox
 * Jaime Pillora <dev@jpillora.com> - MIT Copyright 2017
 */
!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(e){return t[e]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){function n(t,e){return a.call(t,e)}function o(t){if(Array.isArray(t)){for(var e=new Array(t.length),o=0;o<e.length;o++)e[o]=""+o;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)n(t,r)&&e.push(r);return e}function r(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function i(t,e){var o;for(var s in t)if(n(t,s)){if(t[s]===e)return r(s)+"/";if("object"==typeof t[s]&&""!=(o=i(t[s],e)))return r(s)+"/"+o}return""}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=Object.prototype.hasOwnProperty;e.hasOwnProperty=n,e._objectKeys=o,e._deepClone=function(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}},e.isInteger=function(t){for(var e,n=0,o=t.length;n<o;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0},e.escapePathComponent=r,e.unescapePathComponent=function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")},e._getPathRecursive=i,e.getPath=function(t,e){if(t===e)return"/";var n=i(t,e);if(""===n)throw new Error("Object not found in root");return"/"+n},e.hasUndefined=function t(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0}else if("object"==typeof e){var i=o(e),s=i.length;for(n=0;n<s;n++)if(t(e[i[n]]))return!0}return!1};var h=function(t){function e(e,n,o,r,i){t.call(this,e),this.message=e,this.name=n,this.index=o,this.operation=r,this.tree=i}return s(e,t),e}(Error);e.PatchError=h},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function o(t){return null===t||void 0===t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var i=Array.prototype.slice,s=n(8),a=n(9),h=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var c,u;if(o(t)||o(e))return!1;if(t.prototype!==e.prototype)return!1;if(a(t))return!!a(e)&&(t=i.call(t),e=i.call(e),h(t,e,n));if(r(t)){if(!r(e))return!1;if(t.length!==e.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==e[c])return!1;return!0}try{var p=s(t),l=s(e)}catch(t){return!1}if(p.length!=l.length)return!1;for(p.sort(),l.sort(),c=p.length-1;c>=0;c--)if(p[c]!=l[c])return!1;for(c=p.length-1;c>=0;c--)if(u=p[c],!h(t[u],e[u],n))return!1;return typeof t==typeof e}(t,e,n))}},function(t,e,n){function o(t,e){if(""==e)return t;var n={op:"_get",path:e};return r(t,n),n.value}function r(t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!0),r&&("function"==typeof r?r(n,0,t,n.path):s(n,0)),""===n.path){var a={newDocument:t};if("add"===n.op)return a.newDocument=n.value,a;if("replace"===n.op)return a.newDocument=n.value,a.removed=t,a;if("move"===n.op||"copy"===n.op)return a.newDocument=o(t,n.from),"move"===n.op&&(a.removed=t),a;if("test"===n.op){if(a.test=u(t,n.value),!1===a.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return a.newDocument=t,a}if("remove"===n.op)return a.removed=t,a.newDocument=null,a;if("_get"===n.op)return n.value=t,a;if(r)throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,n,t);return a}i||(t=p._deepClone(t));var h=(n.path||"").split("/"),c=t,d=1,v=h.length,y=void 0,m=void 0,w=void 0;for(w="function"==typeof r?r:s;;){if(m=h[d],r&&void 0===y&&(void 0===c[m]?y=h.slice(0,d).join("/"):d==v-1&&(y=n.path),void 0!==y&&w(n,0,t,y)),d++,Array.isArray(c)){if("-"===m)m=c.length;else{if(r&&!p.isInteger(m))throw new e.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,n.path,n);p.isInteger(m)&&(m=~~m)}if(d>=v){if(r&&"add"===n.op&&m>c.length)throw new e.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,n.path,n);if(!1===(a=f[n.op].call(n,c,m,t)).test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return a}}else if(m&&-1!=m.indexOf("~")&&(m=p.unescapePathComponent(m)),d>=v){if(!1===(a=l[n.op].call(n,c,m,t)).test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return a}c=c[m]}}function i(t,n,o){if(o&&!Array.isArray(n))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");for(var i=new Array(n.length),s=0,a=n.length;s<a;s++)i[s]=r(t,n[s],o),t=i[s].newDocument;return i.newDocument=t,i}function s(t,n,o,r){if("object"!=typeof t||null===t||Array.isArray(t))throw new e.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,t,o);if(!l[t.op])throw new e.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,t,o);if("string"!=typeof t.path)throw new e.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,t,o);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new e.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,t,o);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new e.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,t,o);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&p.hasUndefined(t.value))throw new e.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,t,o);if(o)if("add"==t.op){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new e.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,t,o)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new e.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,t,o)}else if("move"===t.op||"copy"===t.op){var h=a([{op:"_get",path:t.from,value:void 0}],o);if(h&&"OPERATION_PATH_UNRESOLVABLE"===h.name)throw new e.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,t,o)}}function a(t,n,o){try{if(!Array.isArray(t))throw new e.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)i(p._deepClone(n),p._deepClone(t),o||!0);else{o=o||s;for(var r=0;r<t.length;r++)o(t[r],r,n,void 0)}}catch(t){if(t instanceof e.JsonPatchError)return t;throw t}}var h={strict:!0},c=n(2),u=function(t,e){return c(t,e,h)},p=n(0);e.JsonPatchError=p.PatchError,e.deepClone=p._deepClone;var l={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var o=t[e];return delete t[e],{newDocument:n,removed:o}},replace:function(t,e,n){var o=t[e];return t[e]=this.value,{newDocument:n,removed:o}},move:function(t,e,n){var i=o(n,this.path);i&&(i=p._deepClone(i));var s=r(n,{op:"remove",path:this.from}).removed;return r(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=o(n,this.from);return r(n,{op:"add",path:this.path,value:p._deepClone(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:u(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},f={add:function(t,e,n){return p.isInteger(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var o=t[e];return t[e]=this.value,{newDocument:n,removed:o}},move:l.move,copy:l.copy,test:l.test,_get:l._get};e.getValueByPointer=o,e.applyOperation=r,e.applyPatch=i,e.applyReducer=function(t,n){var o=r(t,n);if(!1===o.test)throw new e.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,t);return o.newDocument},e.validator=s,e.validate=a},function(t,e,n){"use strict";function o(t){if(r.online=navigator.onLine,r.online)for(var e=0;e<i.length;e++)i[e].retrying&&i[e].retry()}n(5);var r=n(6),i=r.connections;window.addEventListener("online",o),window.addEventListener("offline",o),window.velox=r,t.exports=r},function(t,e){!function(t){"use strict";function e(t,e,o,r,i){this._internal=new n(t,e,o,r,i)}function n(t,e,n,o,r){this.onStartCallback=e,this.onProgressCallback=n,this.onFinishCallback=o,this.thisArg=r,this.xhr=t,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function o(){this._data={}}function r(){this._listeners=new o}function i(t){p(function(){throw t},0)}function s(t){this.type=t,this.target=void 0}function a(t,e){s.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function h(t,e){r.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=g,this.withCredentials=!1,this._internal=new c(this,t,e)}function c(t,n,o){this.url=n.toString(),this.readyState=g,this.withCredentials=y&&void 0!=o&&Boolean(o.withCredentials),this.es=t,this.initialRetry=A(1e3,0),this.heartbeatTimeout=A(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var r=new(void 0!=o&&void 0!=o.Transport?o.Transport:m);this.transport=new e(r,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=w,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=S,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function u(){this.CONNECTING=g,this.OPEN=b,this.CLOSED=E}var p=t.setTimeout,l=t.clearTimeout,f=function(){};e.prototype.open=function(t,e){this._internal.open(t,e)},e.prototype.cancel=function(){this._internal.cancel()},n.prototype.onStart=function(){if(1===this.state){this.state=2;var t=0,e="",n=void 0;if("contentType"in this.xhr)t=200,e="OK",n=this.xhr.contentType;else try{t=this.xhr.status,e=this.xhr.statusText,n=this.xhr.getResponseHeader("Content-Type")}catch(o){t=0,e="",n=void 0}void 0==n&&(n=""),this.onStartCallback.call(this.thisArg,t,e,n)}},n.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var t="";try{t=this.xhr.responseText}catch(t){}for(var e=this.charOffset,n=t.length,o=this.offset;o<n;o+=1){var r=t.charCodeAt(o);r!=="\n".charCodeAt(0)&&r!=="\r".charCodeAt(0)||(this.charOffset=o+1)}this.offset=n;var i=t.slice(e,this.charOffset);this.onProgressCallback.call(this.thisArg,i)}},n.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(l(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},n.prototype.onReadyStateChange=function(){void 0!=this.xhr&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},n.prototype.onTimeout2=function(){this.timeout=0;var e=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),n=e[1],o="base64"===e[2]?t.atob(e[3]):decodeURIComponent(e[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",n)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,o)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},n.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},n.prototype.onTimeout0=function(){var t=this;this.timeout=p(function(){t.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},n.prototype.handleEvent=function(t){"load"===t.type?this.onFinish():"error"===t.type?this.onFinish():"abort"===t.type?this.onFinish():"progress"===t.type?this.onProgress():"readystatechange"===t.type&&this.onReadyStateChange()},n.prototype.open=function(e,n){this.cancel(),this.url=e,this.withCredentials=n,this.state=1,this.charOffset=0,this.offset=0;var o=this;if(void 0==/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e))if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&void 0!=t.document&&void 0!=t.document.readyState&&"complete"!==t.document.readyState)this.timeout=p(function(){o.onTimeout1()},4);else{this.xhr.onload=function(t){o.handleEvent({type:"load"})},this.xhr.onerror=function(){o.handleEvent({type:"error"})},this.xhr.onabort=function(){o.handleEvent({type:"abort"})},this.xhr.onprogress=function(){o.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){o.handleEvent({type:"readystatechange"})},this.xhr.open("GET",e,!0),this.xhr.withCredentials=n,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(t){throw t}"readyState"in this.xhr&&void 0!=t.opera&&(this.timeout=p(function(){o.onTimeout0()},0))}else this.timeout=p(function(){o.onTimeout2()},0)},n.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=f,this.xhr.onerror=f,this.xhr.onabort=f,this.xhr.onprogress=f,this.xhr.onreadystatechange=f,this.xhr.abort(),0!==this.timeout&&(l(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},o.prototype.get=function(t){return this._data[t+"~"]},o.prototype.set=function(t,e){this._data[t+"~"]=e},o.prototype.delete=function(t){delete this._data[t+"~"]},r.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this._listeners.get(e);if(void 0!=n)for(var o=n.length,r=void 0,s=0;s<o;s+=1){r=n[s];try{"function"==typeof r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(t){i(t)}}},r.prototype.addEventListener=function(t,e){t=t.toString();var n=this._listeners,o=n.get(t);void 0==o&&(o=[],n.set(t,o));for(var r=o.length;r>=0;r-=1)if(o[r]===e)return;o.push(e)},r.prototype.removeEventListener=function(t,e){t=t.toString();var n=this._listeners,o=n.get(t);if(void 0!=o){for(var r=o.length,i=[],s=0;s<r;s+=1)o[s]!==e&&i.push(o[s]);0===i.length?n.delete(t):n.set(t,i)}},a.prototype=s.prototype;var d=t.XMLHttpRequest,v=t.XDomainRequest,y=void 0!=d&&void 0!=(new d).withCredentials,m=y||void 0!=d&&void 0==v?d:v,w=-1,g=0,b=1,E=2,S=4,O=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,A=function(t,e){var n=t;return n!=n&&(n=e),n<1e3?1e3:n>18e6?18e6:n},T=function(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){i(t)}};c.prototype.onStart=function(t,e,n){if(this.currentState===g)if(void 0==n&&(n=""),200===t&&O.test(n)){this.currentState=b,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=b,this.es.readyState=b;var o=new s("open");this.es.dispatchEvent(o),T(this.es,this.es.onopen,o)}else if(0!==t){var r;r=200!==t?"EventSource's response has a status "+t+" "+e.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+n.replace(/\s+/g," ")+". Aborting the connection.",i(new Error(r)),this.close();o=new s("error");this.es.dispatchEvent(o),T(this.es,this.es.onerror,o)}},c.prototype.onProgress=function(t){if(this.currentState===b){var e=t.length;0!==e&&(this.wasActivity=!0);for(var n=0;n<e;n+=1){var o=t.charCodeAt(n);if(3===this.state&&o==="\n".charCodeAt(0))this.state=S;else if(3===this.state&&(this.state=S),o==="\r".charCodeAt(0)||o==="\n".charCodeAt(0)){if(this.state!==S){5===this.state&&(this.valueStart=n+1);var r=t.slice(this.fieldStart,this.valueStart-1),i=t.slice(this.valueStart+(this.valueStart<n&&t.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),n);if("data"===r)this.dataBuffer.push(i);else if("id"===r)this.lastEventIdBuffer=i;else if("event"===r)this.eventTypeBuffer=i;else if("retry"===r)this.initialRetry=A(Number(i),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===r&&(this.heartbeatTimeout=A(Number(i),this.heartbeatTimeout),0!==this.timeout)){l(this.timeout);var s=this;this.timeout=p(function(){s.onTimeout()},this.heartbeatTimeout)}}if(this.state===S){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var h=new a(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(h),"message"===this.eventTypeBuffer&&T(this.es,this.es.onmessage,h),this.currentState===E)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=o==="\r".charCodeAt(0)?3:S}else this.state===S&&(this.fieldStart=n,this.state=5),5===this.state?o===":".charCodeAt(0)&&(this.valueStart=n+1,this.state=6):6===this.state&&(this.state=7)}}},c.prototype.onFinish=function(){if(this.currentState===b||this.currentState===g){this.currentState=w,0!==this.timeout&&(l(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>18e6&&(this.retry=18e6);var t=this;this.timeout=p(function(){t.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=g,this.es.readyState=g;var e=new s("error");this.es.dispatchEvent(e),T(this.es,this.es.onerror,e)}},c.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===w){this.wasActivity=!1;var t=this;this.timeout=p(function(){t.onTimeout()},this.heartbeatTimeout),this.currentState=g,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=S;var e=this.url.slice(0,5);e="data:"!==e&&"blob:"!==e?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(e,this.withCredentials)}catch(t){throw this.close(),t}}else if(this.wasActivity){this.wasActivity=!1;t=this;this.timeout=p(function(){t.onTimeout()},this.heartbeatTimeout)}else i(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},c.prototype.close=function(){this.currentState=E,this.transport.cancel(),0!==this.timeout&&(l(this.timeout),this.timeout=0),this.readyState=E,this.es.readyState=E},u.prototype=r.prototype,h.prototype=new u,h.prototype.close=function(){this._internal.close()},u.call(h),y&&(h.prototype.withCredentials=void 0),void 0!=m&&(void 0==t.EventSource||y&&!(void 0!=t.EventSource&&"withCredentials"in t.EventSource.prototype))&&(t.NativeEventSource=t.EventSource,t.EventSource=h)}("undefined"!=typeof window?window:this)},function(t,e,n){"use strict";(function(e){var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(7),s=n(10),a=n(11),h=n(14),c="object"===("undefined"==typeof window?"undefined":r(window)),u="object"===(void 0===e?"undefined":r(e)),p=Symbol("WS"),l=Symbol("SSE"),f=c?window:u?e:null;if(!f)throw"where am i...";var d=["message","error","open","close"],v=[],y=function(){function t(e,n,o,i){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){case p:if(!f.WebSocket)throw"This client does not support WebSockets";this.ws=!0;break;case l:this.sse=!0;break;default:throw"Type must be velox.WS or velox.SSE"}if(!o||"object"!==(void 0===o?"undefined":r(o)))throw"Invalid object";this.obj=o,this.opts=i||{},this.backoff=new h(this.opts.backoff||{min:100,max:2e4}),void 0===this.opts.retry&&(this.opts.retry=!0),n||(n="/velox"),this.url=n,this.id="",this.version=0,this.onupdate=function(){},this.onerror=function(){},this.onconnect=function(){},this.ondisconnect=function(){},this.onchange=function(){},this.connected=!1,this.connect()}return o(t,[{key:"connect",value:function(){var t=this;-1===v.indexOf(this)&&v.push(this),"Promise"in f&&(this.waited=null,this.waiter=new Promise(function(e){t.waited=e})),this.retrying=!0,this.retry()}},{key:"retry",value:function(){if(clearTimeout(this.retry.t),this.conn&&this.cleanup(),this.retrying){this.delay||(this.delay=100);var t=this.url;f.location&&!/^(ws|http)s?:/.test(t)&&(t=f.location.protocol+"//"+f.location.host+t),this.ws&&(t=t.replace(/^http/,"ws"));var e=a(t,!0);this.version&&(e.query.v=this.version),this.id&&(e.query.id=this.id),this.opts.username&&(e.username=this.opts.username),this.opts.password&&(e.password=this.opts.password),t=e.toString(),this.ws?this.conn=new f.WebSocket(t):this.conn=new f.EventSource(t,{withCredentials:!0});var n=this;d.forEach(function(t){n.conn["on"+t]=n["conn"+t].bind(n)}),this.sleepCheck.last=null,this.sleepCheck()}}},{key:"disconnect",value:function(){var t=v.indexOf(this);t>=0&&v.splice(t,1),this.retrying=!1,this.cleanup(),this.waiter&&this.waited()}},{key:"cleanup",value:function(){if(clearTimeout(this.pingout.t),this.conn){var t=this.conn;this.conn=null,d.forEach(function(e){t["on"+e]=null}),t&&t.readyState!==t.CLOSED&&t.close(),this.statusCheck()}}},{key:"send",value:function(t){var e=this.conn;if(e&&e instanceof f.WebSocket&&e.readyState===e.OPEN)return e.send(t)}},{key:"pingin",value:function(){clearTimeout(this.pingin.t),this.pingin.t=setTimeout(this.retry.bind(this),45e3)}},{key:"pingout",value:function(){this.send("ping"),clearTimeout(this.pingout.t),this.pingout.t=setTimeout(this.pingout.bind(this),25e3)}},{key:"sleepCheck",value:function(){var t=this.sleepCheck;clearInterval(t.t);var e=Date.now(),n=t.last&&e-t.last>3e4;t.last=e,t.t=setTimeout(this.sleepCheck.bind(this),5e3),n&&this.retry()}},{key:"statusCheck",value:function(t){var e=!!this.connected,n=!(!this.conn||this.conn.readyState!==this.conn.OPEN);e!==n&&(this.connected=n,this.onchange(this.connected),this.connected?this.onconnect():this.ondisconnect())}},{key:"connmessage",value:function(t){var e=void 0;try{e=JSON.parse(t.data)}catch(t){return void this.onerror(t)}return e.ping?void this.pingin():(e.id&&(this.id=e.id),e.body&&this.obj?(e.delta?i.applyPatch(this.obj,e.body):s(this.obj,e.body),"function"==typeof this.obj.$apply&&this.obj.$apply(),this.onupdate(this.obj),this.version=e.version,void this.backoff.reset()):void this.onerror("null objects"))}},{key:"connopen",value:function(){this.statusCheck(),this.pingin(),this.pingout()}},{key:"connclose",value:function(){if(this.statusCheck(),this.opts.retry){var t=this.backoff.duration();this.retrying&&m.online&&(this.retry.t=setTimeout(this.connect.bind(this),t))}else this.disconnect()}},{key:"connerror",value:function(t){this.conn&&this.conn instanceof f.EventSource?(this.conn.close(),this.connclose()):(this.statusCheck(),this.onerror(t))}},{key:"wait",value:function(){return this.waiter}}]),t}(),m=function t(e,n,o){return t.DEFAULT!==l&&f.WebSocket?t.ws(e,n,o):t.sse(e,n,o)};m.WS=p,m.ws=function(t,e,n){return new y(p,t,e,n)},m.SSE=m.DEFAULT=l,m.sse=function(t,e,n){return new y(l,t,e,n)},m.proto="v2",m.connections=v,m.online=!0,t.exports=m}).call(this,n(1))},function(t,e,n){function o(t){for(var e,n=0,o=c.length;n<o;n++)if(c[n].obj===t.object){e=c[n];break}r(e.value,t.object,t.patches,""),t.patches.length&&s.applyPatch(e.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function r(t,e,n,o){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var s=i._objectKeys(e),a=i._objectKeys(t),h=!1,c=a.length-1;c>=0;c--){var u=t[l=a[c]];if(!i.hasOwnProperty(e,l)||void 0===e[l]&&void 0!==u&&!1===Array.isArray(e))n.push({op:"remove",path:o+"/"+i.escapePathComponent(l)}),h=!0;else{var p=e[l];"object"==typeof u&&null!=u&&"object"==typeof p&&null!=p?r(u,p,n,o+"/"+i.escapePathComponent(l)):u!==p&&n.push({op:"replace",path:o+"/"+i.escapePathComponent(l),value:i._deepClone(p)})}}if(h||s.length!=a.length)for(c=0;c<s.length;c++){var l=s[c];i.hasOwnProperty(t,l)||void 0===e[l]||n.push({op:"add",path:o+"/"+i.escapePathComponent(l),value:i._deepClone(e[l])})}}}var i=(n(2),n(0)),s=n(3),a=n(3);e.applyOperation=a.applyOperation,e.applyPatch=a.applyPatch,e.applyReducer=a.applyReducer,e.getValueByPointer=a.getValueByPointer,e.validate=a.validate,e.validator=a.validator;var h=n(0);e.JsonPatchError=h.PatchError,e.deepClone=h._deepClone,e.escapePathComponent=h.escapePathComponent,e.unescapePathComponent=h.unescapePathComponent;var c=[],u=function(){return function(t){this.observers=[],this.obj=t}}(),p=function(){return function(t,e){this.callback=t,this.observer=e}}();e.unobserve=function(t,e){e.unobserve()},e.observe=function(t,e){var n,r=function(t){for(var e=0,n=c.length;e<n;e++)if(c[e].obj===t)return c[e]}(t);if(r?n=function(t,e){for(var n=0,o=t.observers.length;n<o;n++)if(t.observers[n].callback===e)return t.observers[n].observer}(r,e):(r=new u(t),c.push(r)),n)return n;if(n={},r.value=i._deepClone(t),e){n.callback=e,n.next=null;var s=function(){o(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a)):(document.documentElement.attachEvent("onmouseup",a),document.documentElement.attachEvent("onkeyup",a),document.documentElement.attachEvent("onmousedown",a),document.documentElement.attachEvent("onkeydown",a),document.documentElement.attachEvent("onchange",a)))}return n.patches=[],n.object=t,n.unobserve=function(){o(n),clearTimeout(n.next),function(t,e){for(var n=0,o=t.observers.length;n<o;n++)if(t.observers[n].observer===e)return void t.observers.splice(n,1)}(r,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a)):(document.documentElement.detachEvent("onmouseup",a),document.documentElement.detachEvent("onkeyup",a),document.documentElement.detachEvent("onmousedown",a),document.documentElement.detachEvent("onkeydown",a)))},r.observers.push(new p(e,n)),n},e.generate=o,e.compare=function(t,e){var n=[];return r(t,e,n,""),n}},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:o).supported=n,e.unsupported=o},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function t(e,n){if(!e||"object"!==(void 0===e?"undefined":o(e))||!n||"object"!==(void 0===n?"undefined":o(n)))return n;var r;if(e instanceof Array&&n instanceof Array)for(;e.length>n.length;)e.pop();else for(r in e)"$"===r[0]||r in n||delete e[r];for(r in n)e[r]=t(e[r],n[r]);return e}},function(t,e,n){"use strict";(function(e){function o(t){var n,o=e&&e.location||{},r={},s=typeof(t=t||o);if("blob:"===t.protocol)r=new i(unescape(t.pathname),{});else if("string"===s)for(n in r=new i(t,{}),p)delete r[n];else if("object"===s){for(n in t)n in p||(r[n]=t[n]);void 0===r.slashes&&(r.slashes=c.test(t.href))}return r}function r(t){var e=h.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var h,c,p,l,f,d,v=u.slice(),y=typeof e,m=this,w=0;for("object"!==y&&"string"!==y&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=o(e),h=!(c=r(t||"")).protocol&&!c.slashes,m.slashes=c.slashes||h&&e.slashes,m.protocol=c.protocol||e.protocol||"",t=c.rest,c.slashes||(v[3]=[/(.*)/,"pathname"]);w<v.length;w++)"function"!=typeof(l=v[w])?(p=l[0],d=l[1],p!=p?m[d]=t:"string"==typeof p?~(f=t.indexOf(p))&&("number"==typeof l[2]?(m[d]=t.slice(0,f),t=t.slice(f+l[2])):(m[d]=t.slice(f),t=t.slice(0,f))):(f=p.exec(t))&&(m[d]=f[1],t=t.slice(0,f.index)),m[d]=m[d]||h&&l[3]&&e[d]||"",l[4]&&(m[d]=m[d].toLowerCase())):t=l(t);n&&(m.query=n(m.query)),h&&e.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==e.pathname)&&(m.pathname=function(t,e){for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),o=n.length,r=n[o-1],i=!1,s=0;o--;)"."===n[o]?n.splice(o,1):".."===n[o]?(n.splice(o,1),s++):s&&(0===o&&(i=!0),n.splice(o,1),s--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(m.pathname,e.pathname)),s(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(l=m.auth.split(":"),m.username=l[0]||"",m.password=l[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}var s=n(12),a=n(13),h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};i.prototype={set:function(t,e,n){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||a.parse)(e)),o[t]=e;break;case"port":o[t]=e,s(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";o[t]=e.charAt(0)!==r?r+e:e}else o[t]=e;break;default:o[t]=e}for(var i=0;i<u.length;i++){var h=u[i];h[4]&&(o[h[1]]=o[h[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(r+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(r+=n.hash),r}},i.extractProtocol=r,i.location=o,i.qs=a,t.exports=i}).call(this,n(1))},function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";function o(t){return decodeURIComponent(t.replace(/\+/g," "))}var r=Object.prototype.hasOwnProperty;e.stringify=function(t,e){e=e||"";var n=[];for(var o in"string"!=typeof e&&(e="?"),t)r.call(t,o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length?e+n.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=o(e[1]),s=o(e[2]);i in r||(r[i]=s)}return r}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0}}]);